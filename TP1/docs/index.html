<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>TP1 - Savoir faire des cartes interactives avec Quarto et bertin</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script type="module" src="index_files/libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="index_files/libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">TP1 - Savoir faire des cartes interactives avec Quarto et <code>bertin</code></h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p><strong>L’objectif de ce TP est d’apprendre à créer des cartes interactives avec Quarto et la bibliothèque JavaScript <code>bertin</code>.</strong></p>
<p><img src="img/banner.png" class="img-fluid"></p>
<p><strong>Responsables pédagogiques</strong></p>
<p>Manhamady OUEDRAOGO (Burkina Faso) &amp; Nicolas LAMBERT (France)</p>
<p><strong>Ont participé à l’élaboration de ce module</strong></p>
<p>Claude GRASLAND (France), Souleymane Sidi TRAORE (Mali), Malika MADELIN (France), Sébastien REY-COYREHOURCQ (France), Vakaramoko BAMBA (Côte d’Ivoire), Hugues PECOUT (France), Yentougle MOUTORE (Togo), Bénédicte GARNIER (France), Côomlan Charles HOUNTON (Bénin), Pauline GLUSKI (France).</p>
<section id="démarrer-avec-quarto" class="level1">
<h1>1. Démarrer avec Quarto</h1>
<section id="environnement-logiciel." class="level2">
<h2 class="anchored" data-anchor-id="environnement-logiciel.">1.1 Environnement logiciel.</h2>
<p>Ce TP s’effectue dans le logiciel RStudio. Pour l’installer, vous pouvez vous rendre sur <a href="https://posit.co/download/rstudio-desktop">cette page</a>. Puis, vous devez installer <a href="https://quarto.org/docs/get-started/">Quarto</a>.</p>
<p><img src="img/quartoinstall.png" class="img-fluid"></p>
</section>
<section id="créer-un-document-quarto" class="level2">
<h2 class="anchored" data-anchor-id="créer-un-document-quarto">1.2 Créer un document Quarto</h2>
<ul>
<li>Ouvrir le logiciel RStudio</li>
<li>créer un document Quarto (file &gt; New File &gt; Quarto Document)</li>
</ul>
<p><img src="img/create.png" class="img-fluid"></p>
<ul>
<li>cliquer sur “Create Empty Document”.</li>
<li>Mettez votre nom</li>
<li>Sauvegardez le fichier dans le dossier de votre choix.</li>
</ul>
</section>
<section id="rappel-des-principes" class="level2">
<h2 class="anchored" data-anchor-id="rappel-des-principes">1.3 Rappel des principes</h2>
<p>Les chunks ojs….</p>
<ul>
<li>l’ordre des cellules n’a pas d’importance</li>
</ul>
<p>Toutes les instructions à suivre s’écrivent dans des chunks ojs</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Pour générer le document, il faut clicher sur le bouton <code>render</code> (Ctrl+Shift+K)</p>
</section>
<section id="documentation-et-exemples" class="level2">
<h2 class="anchored" data-anchor-id="documentation-et-exemples">1.4 Documentation et exemples</h2>
<p>Au fil de ce notebook, vous pourrez vous référez à des éléments de documentation en cliquant sur cet icône.</p>
<p><img src="img/logo_doc.png" class="img-fluid"></p>
<p>Vous pourrez également accéder à des exemples pédagogiques et des demos en ligne en cliquant sur celui-là.</p>
<p><img src="img/logo_exemple.png" class="img-fluid"></p>
</section>
</section>
<section id="les-données" class="level1">
<h1>2. Les données</h1>
<p>Présentation des données….</p>
<section id="import-des-données-attributaires" class="level2">
<h2 class="anchored" data-anchor-id="import-des-données-attributaires">2.1 Import des données attributaires</h2>
<p>Dans {ojs}, on importe les données avec l’instruction <code>FileAttachment()</code> <a href="https://github.com/observablehq/stdlib#file-attachments"><img src="img/logo_doc.png"></a></p>
<p>La fonction <code>.xlsx()</code> <a href="https://observablehq.com/@observablehq/xlsx"><img src="img/logo_exemple.png"></a> permet d’importer des tableurs excel.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" data-startfrom="80" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 79;"><span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a>classeur <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data/afrika.xlsx"</span>)<span class="op">.</span><span class="fu">xlsx</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-1" data-nodetype="declaration">

</div>
</div>
</div>
<p><code>classeur.sheetNames</code> permet de voir la liste des feuilles contenues dans le classeur excel</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" data-startfrom="86" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 85;"><span id="cb3-86"><a href="#cb3-86" aria-hidden="true" tabindex="-1"></a>classeur<span class="op">.</span><span class="at">sheetNames</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-2" data-nodetype="expression">

</div>
</div>
</div>
<p>Visualisons les metadonnées avec <code>Inputs.table()</code> <a href="https://github.com/observablehq/inputs#inputstabledata-options"><img src="img/logo_doc.png"></a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" data-startfrom="92" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 91;"><span id="cb4-92"><a href="#cb4-92" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">table</span>(classeur<span class="op">.</span><span class="fu">sheet</span>(<span class="st">"meta"</span><span class="op">,</span> {<span class="dt">headers</span><span class="op">:</span><span class="kw">true</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-3" data-nodetype="expression">

</div>
</div>
</div>
<p>Et créons une variable <code>data</code> contenant les données de feuille data</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" data-startfrom="98" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 97;"><span id="cb5-98"><a href="#cb5-98" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> classeur<span class="op">.</span><span class="fu">sheet</span>(<span class="st">"data"</span><span class="op">,</span> {<span class="dt">headers</span><span class="op">:</span><span class="kw">true</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-4" data-nodetype="declaration">

</div>
</div>
</div>
<p>Visualisons-la.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" data-startfrom="104" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 103;"><span id="cb6-104"><a href="#cb6-104" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">table</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-5" data-nodetype="expression">

</div>
</div>
</div>
</section>
<section id="import-des-données-géométriques" class="level2">
<h2 class="anchored" data-anchor-id="import-des-données-géométriques">2.2 Import des données géométriques</h2>
<p>Import du fond de carte</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" data-startfrom="112" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 111;"><span id="cb7-112"><a href="#cb7-112" aria-hidden="true" tabindex="-1"></a>countries <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data/africa.json"</span>)<span class="op">.</span><span class="fu">json</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-6" data-nodetype="declaration">

</div>
</div>
</div>
<p>Le fond de carte est au format geoJSON</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" data-startfrom="118" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 117;"><span id="cb8-118"><a href="#cb8-118" aria-hidden="true" tabindex="-1"></a>countries</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-7" data-nodetype="expression">

</div>
</div>
</div>
<p>Pour la visualiser, on a besoin d’importer une bibliothèque de cartographie. Ici, on choisit la bibliothèque <code>bertin</code> <a href="https://github.com/neocarto/bertin"><img src="img/logo_doc.png"></a> On l’importe grace à l’instruction <code>require()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" data-startfrom="124" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 123;"><span id="cb9-124"><a href="#cb9-124" aria-hidden="true" tabindex="-1"></a>bertin <span class="op">=</span> <span class="pp">require</span>(<span class="st">"bertin@1.5.10"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-8" data-nodetype="declaration">

</div>
</div>
</div>
<p>La fonction <code>quickdraw()</code> <a href="https://observablehq.com/@neocartocnrs/bertin-js-quickdraw-table2geo"><img src="img/logo_exemple.png"></a> permet de visualiser rapidement n’importe quel fond de carte.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" data-startfrom="130" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 129;"><span id="cb10-130"><a href="#cb10-130" aria-hidden="true" tabindex="-1"></a>bertin<span class="op">.</span><span class="fu">quickdraw</span>(countries<span class="op">,</span> <span class="dv">500</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-9" data-nodetype="expression">

</div>
</div>
</div>
<p>Pour récupérer la table attributaire, on utilise l’instruction <code>bertin.properties.table()</code> <a href="https://github.com/neocarto/bertin#propertiestable"><img src="img/logo_doc.png"></a>. Puis, on peut la visualiser sous forme de tableau avec <code>Inputs.table()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" data-startfrom="136" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 135;"><span id="cb11-136"><a href="#cb11-136" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">table</span>(bertin<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="fu">table</span>(countries))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-10" data-nodetype="expression">

</div>
</div>
</div>
</section>
</section>
<section id="création-de-carte-statiques" class="level1">
<h1>2. Création de carte statiques</h1>
<section id="jointure" class="level2">
<h2 class="anchored" data-anchor-id="jointure">2.1 Jointure</h2>
<p>La première chose à faire est de réaliser une jointure entre les données et le fond de carte. Pour cea on va procéder en 2 étapes. <code>bertin.match</code> <a href="https://github.com/neocarto/bertin#match"><img src="img/logo_doc.png"></a> permet de tester et visaliser le compatibilité entre le fond de carte et le tableau de données. <code>bertin.merge</code> <a href="https://github.com/neocarto/bertin#merge"><img src="img/logo_doc.png"></a> permet d’effectuer réellement cette jointure. <a href="https://observablehq.com/@neocartocnrs/bertin-js-match-and-merge?collection=@neocartocnrs/bertin"><img src="img/logo_exemple.png"></a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" data-startfrom="147" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 146;"><span id="cb12-147"><a href="#cb12-147" aria-hidden="true" tabindex="-1"></a>test <span class="op">=</span> bertin<span class="op">.</span><span class="fu">match</span>(countries<span class="op">,</span> <span class="st">"id"</span><span class="op">,</span> data<span class="op">,</span> <span class="st">"iso3"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-11" data-nodetype="declaration">

</div>
</div>
</div>
<p>On constate que le jeu de données et le fond de carte sont compatibles à 98%. Toutes les données disponibles dans le jeu de données peuvent être jointe avec le fond de carte (49/49). Seule une unité géographique dans le fond de carte n’a pas d’&amp;quivalent dans le tableau de données (49/50). Pour savoir de quelle unité il s’agit, on peut taper <code>test.unmatched_geom</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" data-startfrom="153" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 152;"><span id="cb13-153"><a href="#cb13-153" aria-hidden="true" tabindex="-1"></a>test<span class="op">.</span><span class="at">unmatched_geom</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-12" data-nodetype="expression">

</div>
</div>
</div>
<p>Il s’agit du Sahara Occidental. Il n’y a en effet pas de données pour cette unité géographique. On peut donc décider d’effecter la jointure pour de bon et de créer un nouvel objet <code>africa</code>. Cet objet contient à la fois les données et les géométries.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" data-startfrom="159" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 158;"><span id="cb14-159"><a href="#cb14-159" aria-hidden="true" tabindex="-1"></a>africa <span class="op">=</span> bertin<span class="op">.</span><span class="fu">merge</span>(countries<span class="op">,</span> <span class="st">"id"</span><span class="op">,</span> data<span class="op">,</span> <span class="st">"iso3"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-13" data-nodetype="declaration">

</div>
</div>
</div>
</section>
<section id="réaliser-des-cartes-avec-bertin" class="level2">
<h2 class="anchored" data-anchor-id="réaliser-des-cartes-avec-bertin">2.2 Réaliser des cartes avec <code>bertin</code></h2>
<p>Pour réaliser une carte avec la bibliothèque <code>bertin</code>, on utilise la fonction <code>draw()</code> <a href="https://github.com/neocarto/bertin#drawing-a-map"><img src="img/logo_doc.png"></a>.</p>
<p>La fonction prend en entrée un objet avec la structure suivante <a href="https://observablehq.com/@neocartocnrs/hello-bertin-js?collection=@neocartocnrs/bertin"><img src="img/logo_exemple.png"></a> :</p>
<p><img src="img/bertin_code.png" class="img-fluid"></p>
<p>Ainsi, on peut écrire :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15" data-startfrom="173" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 172;"><span id="cb15-173"><a href="#cb15-173" aria-hidden="true" tabindex="-1"></a>bertin<span class="op">.</span><span class="fu">draw</span>({</span>
<span id="cb15-174"><a href="#cb15-174" aria-hidden="true" tabindex="-1"></a>  <span class="dt">params</span> <span class="op">:</span> {<span class="dt">width</span> <span class="op">:</span> <span class="dv">500</span><span class="op">,</span> <span class="dt">background</span><span class="op">:</span> <span class="st">"#CCC"</span><span class="op">,</span> <span class="dt">margin</span><span class="op">:</span> <span class="dv">20</span>}<span class="op">,</span> </span>
<span id="cb15-175"><a href="#cb15-175" aria-hidden="true" tabindex="-1"></a>  <span class="dt">layers</span> <span class="op">:</span></span>
<span id="cb15-176"><a href="#cb15-176" aria-hidden="true" tabindex="-1"></a>    [</span>
<span id="cb15-177"><a href="#cb15-177" aria-hidden="true" tabindex="-1"></a>      {<span class="dt">geojson</span><span class="op">:</span> africa<span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#e07edd"</span>}<span class="op">,</span></span>
<span id="cb15-178"><a href="#cb15-178" aria-hidden="true" tabindex="-1"></a>      {<span class="dt">type</span><span class="op">:</span> <span class="st">"header"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"Le continent africain"</span>}<span class="op">,</span></span>
<span id="cb15-179"><a href="#cb15-179" aria-hidden="true" tabindex="-1"></a>      {<span class="dt">type</span><span class="op">:</span> <span class="st">"scalebar"</span>}</span>
<span id="cb15-180"><a href="#cb15-180" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb15-181"><a href="#cb15-181" aria-hidden="true" tabindex="-1"></a>  })</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-14" data-nodetype="expression">

</div>
</div>
</div>
<p>Le type de carte thématique qu’on va réaliser dépend du type de données à représenter.</p>
</section>
<section id="cartographier-des-données-quantitatives-aboslues-stock" class="level2">
<h2 class="anchored" data-anchor-id="cartographier-des-données-quantitatives-aboslues-stock">2.3. Cartographier des données quantitatives aboslues (stock)</h2>
<p>En cartographie, on représente des données quantitatives absolues avec la variable visuelle TAILLE. Pour avoir des cercles proportionnels, dans <code>bertin</code>, on utilisera le type <code>bubble</code> <a href="https://github.com/neocarto/bertin#bubble"><img src="img/logo_doc.png"></a><a href="https://observablehq.com/@neocartocnrs/bertin-js-prop-symbols?collection=@neocartocnrs/bertin"><img src="img/logo_exemple.png"></a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16" data-startfrom="191" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 190;"><span id="cb16-191"><a href="#cb16-191" aria-hidden="true" tabindex="-1"></a>bertin<span class="op">.</span><span class="fu">draw</span>({</span>
<span id="cb16-192"><a href="#cb16-192" aria-hidden="true" tabindex="-1"></a>  <span class="dt">params</span> <span class="op">:</span> {<span class="dt">width</span> <span class="op">:</span> <span class="dv">500</span><span class="op">,</span> <span class="dt">background</span><span class="op">:</span> <span class="st">"#CCC"</span><span class="op">,</span> <span class="dt">margin</span><span class="op">:</span> <span class="dv">20</span>}<span class="op">,</span> </span>
<span id="cb16-193"><a href="#cb16-193" aria-hidden="true" tabindex="-1"></a>  <span class="dt">layers</span> <span class="op">:</span></span>
<span id="cb16-194"><a href="#cb16-194" aria-hidden="true" tabindex="-1"></a>    [</span>
<span id="cb16-195"><a href="#cb16-195" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb16-196"><a href="#cb16-196" aria-hidden="true" tabindex="-1"></a>        <span class="dt">type</span> <span class="op">:</span> <span class="st">"bubble"</span><span class="op">,</span> </span>
<span id="cb16-197"><a href="#cb16-197" aria-hidden="true" tabindex="-1"></a>        <span class="dt">geojson</span><span class="op">:</span> africa<span class="op">,</span></span>
<span id="cb16-198"><a href="#cb16-198" aria-hidden="true" tabindex="-1"></a>        <span class="dt">values</span><span class="op">:</span> <span class="st">"POP"</span><span class="op">,</span></span>
<span id="cb16-199"><a href="#cb16-199" aria-hidden="true" tabindex="-1"></a>        <span class="dt">k</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="co">// rayon du plus grand cercle</span></span>
<span id="cb16-200"><a href="#cb16-200" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fill</span><span class="op">:</span> <span class="st">"red"</span><span class="op">,</span></span>
<span id="cb16-201"><a href="#cb16-201" aria-hidden="true" tabindex="-1"></a>        <span class="dt">leg_x</span><span class="op">:</span> <span class="dv">30</span><span class="op">,</span></span>
<span id="cb16-202"><a href="#cb16-202" aria-hidden="true" tabindex="-1"></a>        <span class="dt">leg_y</span><span class="op">:</span> <span class="dv">300</span><span class="op">,</span></span>
<span id="cb16-203"><a href="#cb16-203" aria-hidden="true" tabindex="-1"></a>        <span class="dt">leg_round</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb16-204"><a href="#cb16-204" aria-hidden="true" tabindex="-1"></a>        <span class="dt">leg_title</span><span class="op">:</span> <span class="st">"Nombre d'habitants"</span></span>
<span id="cb16-205"><a href="#cb16-205" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb16-206"><a href="#cb16-206" aria-hidden="true" tabindex="-1"></a>      {<span class="dt">geojson</span><span class="op">:</span> africa<span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#DDD"</span>}<span class="op">,</span></span>
<span id="cb16-207"><a href="#cb16-207" aria-hidden="true" tabindex="-1"></a>      {<span class="dt">type</span><span class="op">:</span> <span class="st">"header"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"Le continent africain"</span>}<span class="op">,</span></span>
<span id="cb16-208"><a href="#cb16-208" aria-hidden="true" tabindex="-1"></a>      {<span class="dt">type</span><span class="op">:</span> <span class="st">"scalebar"</span>}</span>
<span id="cb16-209"><a href="#cb16-209" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb16-210"><a href="#cb16-210" aria-hidden="true" tabindex="-1"></a>  })</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-15" data-nodetype="expression">

</div>
</div>
</div>
<p>D’autres modes de représentation auraient bien sûr été possibles. On aurait également pu faire des carrés <a href="https://observablehq.com/@neocartocnrs/bertin-js-prop-squares?collection=@neocartocnrs/bertin"><img src="img/logo_exemple.png"></a> ou des <em>spikes</em> <a href="https://observablehq.com/@neocartocnrs/bertin-js-spikes?collection=@neocartocnrs/bertin"><img src="img/logo_exemple.png"></a></p>
</section>
<section id="cartographier-des-données-qualitatives-nominales" class="level2">
<h2 class="anchored" data-anchor-id="cartographier-des-données-qualitatives-nominales">2.4 Cartographier des données qualitatives nominales</h2>
<p>Il y a plusieurs façons de cartographier des données qualitatives nominales. Sur écran, en cartographie numérique, on choisra la plupart du temps la variable visuelle COULEUR (teinte).</p>
<p>Dans <code>bertin</code>, il s’agit donc de faire varier la propriété <code>fill</code> et de la faire varier en fonction d’une donnée qualitative. Pour cela, on utilise le type <code>typo</code> <a href="https://github.com/neocarto/bertin#typology"><img src="img/logo_doc.png"></a><a href="https://observablehq.com/@neocartocnrs/bertin-js-typo?collection=@neocartocnrs/bertin"><img src="img/logo_exemple.png"></a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17" data-startfrom="223" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 222;"><span id="cb17-223"><a href="#cb17-223" aria-hidden="true" tabindex="-1"></a>bertin<span class="op">.</span><span class="fu">draw</span>({</span>
<span id="cb17-224"><a href="#cb17-224" aria-hidden="true" tabindex="-1"></a>  <span class="dt">params</span> <span class="op">:</span> {<span class="dt">width</span> <span class="op">:</span> <span class="dv">500</span><span class="op">,</span> <span class="dt">background</span><span class="op">:</span> <span class="st">"#CCC"</span><span class="op">,</span> <span class="dt">margin</span><span class="op">:</span> <span class="dv">20</span>}<span class="op">,</span> </span>
<span id="cb17-225"><a href="#cb17-225" aria-hidden="true" tabindex="-1"></a>  <span class="dt">layers</span> <span class="op">:</span></span>
<span id="cb17-226"><a href="#cb17-226" aria-hidden="true" tabindex="-1"></a>    [</span>
<span id="cb17-227"><a href="#cb17-227" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb17-228"><a href="#cb17-228" aria-hidden="true" tabindex="-1"></a>        <span class="dt">geojson</span><span class="op">:</span> africa<span class="op">,</span> </span>
<span id="cb17-229"><a href="#cb17-229" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fill</span><span class="op">:</span> {</span>
<span id="cb17-230"><a href="#cb17-230" aria-hidden="true" tabindex="-1"></a>                <span class="dt">type</span> <span class="op">:</span> <span class="st">"typo"</span><span class="op">,</span></span>
<span id="cb17-231"><a href="#cb17-231" aria-hidden="true" tabindex="-1"></a>                <span class="dt">values</span><span class="op">:</span> <span class="st">"SUBREG"</span><span class="op">,</span></span>
<span id="cb17-232"><a href="#cb17-232" aria-hidden="true" tabindex="-1"></a>                <span class="dt">leg_x</span><span class="op">:</span> <span class="dv">30</span><span class="op">,</span></span>
<span id="cb17-233"><a href="#cb17-233" aria-hidden="true" tabindex="-1"></a>                <span class="dt">leg_y</span><span class="op">:</span> <span class="dv">330</span><span class="op">,</span></span>
<span id="cb17-234"><a href="#cb17-234" aria-hidden="true" tabindex="-1"></a>                <span class="dt">leg_title</span><span class="op">:</span> <span class="st">"Sub regions"</span><span class="op">,</span></span>
<span id="cb17-235"><a href="#cb17-235" aria-hidden="true" tabindex="-1"></a>                <span class="dt">txt_missing</span><span class="op">:</span> <span class="st">"Pas de données"</span><span class="op">,</span></span>
<span id="cb17-236"><a href="#cb17-236" aria-hidden="true" tabindex="-1"></a>                <span class="dt">pal</span><span class="op">:</span> <span class="st">"Tableau10"</span><span class="op">,</span></span>
<span id="cb17-237"><a href="#cb17-237" aria-hidden="true" tabindex="-1"></a>              }</span>
<span id="cb17-238"><a href="#cb17-238" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb17-239"><a href="#cb17-239" aria-hidden="true" tabindex="-1"></a>      {<span class="dt">type</span><span class="op">:</span> <span class="st">"header"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"Le continent africain"</span>}<span class="op">,</span></span>
<span id="cb17-240"><a href="#cb17-240" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb17-241"><a href="#cb17-241" aria-hidden="true" tabindex="-1"></a>  })</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-16" data-nodetype="expression">

</div>
</div>
</div>
<p>La palette de couleurs oar défaut est <code>Tableau10</code>. Mais il est possible d’en choisir une autre : <code>Category10</code>, <code>Accent</code>, <code>Dark2</code>, <code>Paired</code>, <code>Pastel1</code>, <code>Pastel2</code>, <code>Set1</code>, <code>Set2</code> ou <code>Set3</code> <a href="https://observablehq.com/@d3/color-schemes"><img src="img/logo_exemple.png"></a>.</p>
<p>Il est aussi possible de définir vos propres couleurs en replaçant <code>pal: "Tableau10"</code> par <code>colors: ["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3"]</code>.</p>
</section>
<section id="cartographier-des-données-quantitatives-relatives-ratio-indice" class="level2">
<h2 class="anchored" data-anchor-id="cartographier-des-données-quantitatives-relatives-ratio-indice">2.5 Cartographier des données quantitatives relatives (ratio, indice)</h2>
<p>Il y a plusieurs façons de cartographier des données quantitatives relatives. Sur écran, en cartographie numérique, on choisra la plupart du temps de réaliser une carte choroplèthe avec des couleurs ordonnées. Un étape de discrétisation préalable est nécéssaire. Elle nécessite d’étudier la forme de la distribution statistique. Pour celà, on utilisera la librairie <code>Plot</code> <a href="https://github.com/observablehq/plot"><img src="img/logo_doc.png"></a> <a href="https://observablehq.com/collection/@observablehq/plot"><img src="img/logo_exemple.png"></a> disponible nativement dans les celles <code>{ojs}</code>.</p>
<p>Il y a plusieurs façons de visualister la forme d’une distribution <a href="https://observablehq.com/@cartographie/les-discretisations?collection=@cartographie/cours"><img src="img/logo_exemple.png"></a> Ici, on choisira un graphique avec des points et une transformation de type dodge.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18" data-startfrom="255" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 254;"><span id="cb18-255"><a href="#cb18-255" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb18-256"><a href="#cb18-256" aria-hidden="true" tabindex="-1"></a>  <span class="dt">height</span><span class="op">:</span> <span class="dv">60</span><span class="op">,</span></span>
<span id="cb18-257"><a href="#cb18-257" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb18-258"><a href="#cb18-258" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">dotX</span>(</span>
<span id="cb18-259"><a href="#cb18-259" aria-hidden="true" tabindex="-1"></a>      data<span class="op">,</span></span>
<span id="cb18-260"><a href="#cb18-260" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">dodgeY</span>({ <span class="dt">x</span><span class="op">:</span> <span class="st">"IDH"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"red"</span> })</span>
<span id="cb18-261"><a href="#cb18-261" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb18-262"><a href="#cb18-262" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb18-263"><a href="#cb18-263" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-17" data-nodetype="expression">

</div>
</div>
</div>
<p>Dans <code>bertin</code>, il s’agit donc de faire varier comme précédemment la propriété <code>fill</code>. Pour cela, on utilise le type <code>choro</code> <a href="https://github.com/neocarto/bertin#choropleth"><img src="img/logo_doc.png"></a> <a href="https://observablehq.com/@neocartocnrs/bertin-js-chropoleth?collection=@neocartocnrs/bertin"><img src="img/logo_exemple.png"></a></p>
<p>Les méthodes de discrétisation disponibles son celles contenues dans la libraire <code>statsbreaks</code> <a href="https://observablehq.com/@neocartocnrs/hello-statsbreaks"><img src="img/logo_exemple.png"></a> : <code>quantile</code>, <code>q6</code>, <code>jenks</code>, <code>msd</code> (moyenne écart-type) et <code>equal</code>. Pour les couleurs, de nombreuses palettes sont disponibles : <code>Blues</code>, <code>Greens</code>, <code>Greys</code>, <code>Oranges</code>, <code>Purples</code>, <code>Reds</code>, <code>BrBG</code>, <code>PRGn</code>, <code>PiYG</code>, <code>PuOr</code>, <code>RdBu</code>, <code>RdYlBu</code>, <code>RdYlGn</code>, <code>Spectral</code>,<code>Turbo</code>,<code>Viridis</code>,<code>Inferno</code>, <code>Magma</code>, <code>Plasma</code>, <code>Cividis</code>, <code>Warm</code>, <code>Cool</code>, <code>CubehelixDefault</code>, <code>BuGn</code>, <code>BuPu</code>, <code>GnBu</code>, <code>OrRd</code>, <code>PuBuGn</code>, <code>PuBu</code>, <code>PuRd</code>, <code>RdPu</code>, <code>YlGnBu</code>, <code>YlGn</code>, <code>YlOrBr</code>, <code>YlOrRd</code>, <code>Rainbow</code>, <code>Sinebow</code> <a href="https://observablehq.com/@d3/color-schemes"><img src="img/logo_exemple.png"></a></p>
<p>Par défaut, la méthode choisie est le <code>quantile</code>, la palettes est <code>Blues</code> et le nombre de classes est égal à 5.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19" data-startfrom="279" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 278;"><span id="cb19-279"><a href="#cb19-279" aria-hidden="true" tabindex="-1"></a>bertin<span class="op">.</span><span class="fu">draw</span>({</span>
<span id="cb19-280"><a href="#cb19-280" aria-hidden="true" tabindex="-1"></a>  <span class="dt">params</span> <span class="op">:</span> {<span class="dt">width</span> <span class="op">:</span> <span class="dv">500</span><span class="op">,</span> <span class="dt">background</span><span class="op">:</span> <span class="st">"#CCC"</span><span class="op">,</span> <span class="dt">margin</span><span class="op">:</span> <span class="dv">20</span>}<span class="op">,</span> </span>
<span id="cb19-281"><a href="#cb19-281" aria-hidden="true" tabindex="-1"></a>  <span class="dt">layers</span> <span class="op">:</span></span>
<span id="cb19-282"><a href="#cb19-282" aria-hidden="true" tabindex="-1"></a>    [</span>
<span id="cb19-283"><a href="#cb19-283" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb19-284"><a href="#cb19-284" aria-hidden="true" tabindex="-1"></a>        <span class="dt">geojson</span><span class="op">:</span> africa<span class="op">,</span> </span>
<span id="cb19-285"><a href="#cb19-285" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fill</span><span class="op">:</span> {</span>
<span id="cb19-286"><a href="#cb19-286" aria-hidden="true" tabindex="-1"></a>                <span class="dt">type</span> <span class="op">:</span> <span class="st">"choro"</span><span class="op">,</span></span>
<span id="cb19-287"><a href="#cb19-287" aria-hidden="true" tabindex="-1"></a>                <span class="dt">values</span><span class="op">:</span> <span class="st">"IDH"</span><span class="op">,</span></span>
<span id="cb19-288"><a href="#cb19-288" aria-hidden="true" tabindex="-1"></a>                <span class="dt">leg_x</span><span class="op">:</span> <span class="dv">30</span><span class="op">,</span> <span class="co">// position de la légende en x</span></span>
<span id="cb19-289"><a href="#cb19-289" aria-hidden="true" tabindex="-1"></a>                <span class="dt">leg_y</span><span class="op">:</span> <span class="dv">330</span><span class="op">,</span> <span class="co">// position de la légende en y</span></span>
<span id="cb19-290"><a href="#cb19-290" aria-hidden="true" tabindex="-1"></a>                <span class="dt">leg_round</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="co">// 2 chiffres après la virgule</span></span>
<span id="cb19-291"><a href="#cb19-291" aria-hidden="true" tabindex="-1"></a>                <span class="dt">leg_title</span><span class="op">:</span> <span class="st">"IDH"</span><span class="op">,</span></span>
<span id="cb19-292"><a href="#cb19-292" aria-hidden="true" tabindex="-1"></a>                <span class="dt">txt_missing</span><span class="op">:</span> <span class="st">"Pas de données"</span><span class="op">,</span></span>
<span id="cb19-293"><a href="#cb19-293" aria-hidden="true" tabindex="-1"></a>                <span class="dt">method</span><span class="op">:</span> <span class="st">"quantile"</span><span class="op">,</span></span>
<span id="cb19-294"><a href="#cb19-294" aria-hidden="true" tabindex="-1"></a>                <span class="dt">nbreaks</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span></span>
<span id="cb19-295"><a href="#cb19-295" aria-hidden="true" tabindex="-1"></a>                <span class="dt">colors</span><span class="op">:</span> <span class="st">"OrRd"</span></span>
<span id="cb19-296"><a href="#cb19-296" aria-hidden="true" tabindex="-1"></a>              }</span>
<span id="cb19-297"><a href="#cb19-297" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb19-298"><a href="#cb19-298" aria-hidden="true" tabindex="-1"></a>      {<span class="dt">type</span><span class="op">:</span> <span class="st">"header"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"Indicateur de développement humain"</span>}<span class="op">,</span></span>
<span id="cb19-299"><a href="#cb19-299" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb19-300"><a href="#cb19-300" aria-hidden="true" tabindex="-1"></a>  })</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-18" data-nodetype="expression">

</div>
</div>
</div>
</section>
</section>
<section id="création-de-cartes-interactives" class="level1">
<h1>3. Création de cartes interactives</h1>
<p>Avec Observable JavaScript, nous sommes dans un écosystème pleinement réactif 🔥 Cela signifie qu’il est possible de proposer à l’utilisateur des possibilités d’interaction avec la carte. Reprenons le cade de la carte par symboles proportionnels… et personnalisons le un peu en remplaçant les valeurs écrites <em>en dur</em> par des valeurs issues des <code>Inputs</code> <a href="https://github.com/observablehq/inputs"><img src="img/logo_doc.png"></a> <a href="https://observablehq.com/@observablehq/inputs"><img src="img/logo_exemple.png"></a></p>
<p>Il est également possible d’ajouter des infobulles <a href="https://observablehq.com/@neocartocnrs/bertin-js-tooltips?collection=@neocartocnrs/bertin"><img src="img/logo_exemple.png"></a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20" data-startfrom="312" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 311;"><span id="cb20-312"><a href="#cb20-312" aria-hidden="true" tabindex="-1"></a>viewof k <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">10</span><span class="op">,</span> <span class="dv">75</span>]<span class="op">,</span> { <span class="dt">label</span><span class="op">:</span> <span class="st">"Taille"</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">40</span> })</span>
<span id="cb20-313"><a href="#cb20-313" aria-hidden="true" tabindex="-1"></a>viewof symbol <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">radio</span>([<span class="st">"bubble"</span><span class="op">,</span> <span class="st">"square"</span><span class="op">,</span> <span class="st">"spikes"</span>]<span class="op">,</span> { <span class="dt">label</span><span class="op">:</span> <span class="st">"Symbole"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"bubble"</span> })</span>
<span id="cb20-314"><a href="#cb20-314" aria-hidden="true" tabindex="-1"></a>viewof color <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">color</span>({<span class="dt">label</span><span class="op">:</span> <span class="st">"Couleur"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"#CC0000"</span>})</span>
<span id="cb20-315"><a href="#cb20-315" aria-hidden="true" tabindex="-1"></a>viewof toggle <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">toggle</span>({<span class="dt">label</span><span class="op">:</span> <span class="st">"Ecarter les symboles"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="kw">false</span>})</span>
<span id="cb20-316"><a href="#cb20-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-317"><a href="#cb20-317" aria-hidden="true" tabindex="-1"></a>bertin<span class="op">.</span><span class="fu">draw</span>({</span>
<span id="cb20-318"><a href="#cb20-318" aria-hidden="true" tabindex="-1"></a>  <span class="dt">params</span> <span class="op">:</span> {<span class="dt">width</span> <span class="op">:</span> <span class="dv">500</span><span class="op">,</span> <span class="dt">background</span><span class="op">:</span> <span class="st">"#CCC"</span><span class="op">,</span> <span class="dt">margin</span><span class="op">:</span> <span class="dv">20</span>}<span class="op">,</span> </span>
<span id="cb20-319"><a href="#cb20-319" aria-hidden="true" tabindex="-1"></a>  <span class="dt">layers</span> <span class="op">:</span></span>
<span id="cb20-320"><a href="#cb20-320" aria-hidden="true" tabindex="-1"></a>    [</span>
<span id="cb20-321"><a href="#cb20-321" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb20-322"><a href="#cb20-322" aria-hidden="true" tabindex="-1"></a>        <span class="dt">type</span> <span class="op">:</span> symbol<span class="op">,</span> </span>
<span id="cb20-323"><a href="#cb20-323" aria-hidden="true" tabindex="-1"></a>        <span class="dt">geojson</span><span class="op">:</span> africa<span class="op">,</span></span>
<span id="cb20-324"><a href="#cb20-324" aria-hidden="true" tabindex="-1"></a>        <span class="dt">values</span><span class="op">:</span> <span class="st">"POP"</span><span class="op">,</span></span>
<span id="cb20-325"><a href="#cb20-325" aria-hidden="true" tabindex="-1"></a>        <span class="dt">k</span><span class="op">:</span> k<span class="op">,</span> <span class="co">// rayon du plus grand cercle</span></span>
<span id="cb20-326"><a href="#cb20-326" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fill</span><span class="op">:</span> color<span class="op">,</span></span>
<span id="cb20-327"><a href="#cb20-327" aria-hidden="true" tabindex="-1"></a>        <span class="dt">dorling</span><span class="op">:</span> toggle<span class="op">,</span></span>
<span id="cb20-328"><a href="#cb20-328" aria-hidden="true" tabindex="-1"></a>        <span class="dt">leg_x</span><span class="op">:</span> <span class="dv">30</span><span class="op">,</span></span>
<span id="cb20-329"><a href="#cb20-329" aria-hidden="true" tabindex="-1"></a>        <span class="dt">leg_y</span><span class="op">:</span> <span class="dv">300</span><span class="op">,</span></span>
<span id="cb20-330"><a href="#cb20-330" aria-hidden="true" tabindex="-1"></a>        <span class="dt">leg_round</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb20-331"><a href="#cb20-331" aria-hidden="true" tabindex="-1"></a>        <span class="dt">leg_title</span><span class="op">:</span> <span class="st">"Nombre d'habitants"</span><span class="op">,</span></span>
<span id="cb20-332"><a href="#cb20-332" aria-hidden="true" tabindex="-1"></a>        <span class="co">//tooltip: ["$name", "$POP"]</span></span>
<span id="cb20-333"><a href="#cb20-333" aria-hidden="true" tabindex="-1"></a>        <span class="dt">tooltip</span><span class="op">:</span> [<span class="st">"$name"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">POP</span>) <span class="op">+</span> <span class="st">" millions d'habitants"</span>]        </span>
<span id="cb20-334"><a href="#cb20-334" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb20-335"><a href="#cb20-335" aria-hidden="true" tabindex="-1"></a>      {<span class="dt">geojson</span><span class="op">:</span> africa<span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#DDD"</span>}<span class="op">,</span></span>
<span id="cb20-336"><a href="#cb20-336" aria-hidden="true" tabindex="-1"></a>      {<span class="dt">type</span><span class="op">:</span> <span class="st">"header"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"Le continent africain"</span>}<span class="op">,</span></span>
<span id="cb20-337"><a href="#cb20-337" aria-hidden="true" tabindex="-1"></a>      {<span class="dt">type</span><span class="op">:</span> <span class="st">"scalebar"</span>}</span>
<span id="cb20-338"><a href="#cb20-338" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb20-339"><a href="#cb20-339" aria-hidden="true" tabindex="-1"></a>  })</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-19-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-19-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-19-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-19-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-19-5" data-nodetype="expression">

</div>
</div>
</div>
</div>
<p>Aller plus loin…</p>
<p>A vous de jouer…..</p>
<!-- -->

</section>

</main>
<!-- /main column -->

<script type="ojs-module-contents">
{"contents":[{"methodName":"interpret","cellName":"ojs-cell-1","inline":false,"source":"classeur = FileAttachment(\"data/afrika.xlsx\").xlsx()\n"},{"methodName":"interpret","cellName":"ojs-cell-2","inline":false,"source":"classeur.sheetNames\n"},{"methodName":"interpret","cellName":"ojs-cell-3","inline":false,"source":"Inputs.table(classeur.sheet(\"meta\", {headers:true}))\n"},{"methodName":"interpret","cellName":"ojs-cell-4","inline":false,"source":"data = classeur.sheet(\"data\", {headers:true})\n"},{"methodName":"interpret","cellName":"ojs-cell-5","inline":false,"source":"Inputs.table(data)\n"},{"methodName":"interpret","cellName":"ojs-cell-6","inline":false,"source":"countries = FileAttachment(\"data/africa.json\").json()\n"},{"methodName":"interpret","cellName":"ojs-cell-7","inline":false,"source":"countries\n"},{"methodName":"interpret","cellName":"ojs-cell-8","inline":false,"source":"bertin = require(\"bertin@1.5.10\")\n"},{"methodName":"interpret","cellName":"ojs-cell-9","inline":false,"source":"bertin.quickdraw(countries, 500)\n"},{"methodName":"interpret","cellName":"ojs-cell-10","inline":false,"source":"Inputs.table(bertin.properties.table(countries))\n"},{"methodName":"interpret","cellName":"ojs-cell-11","inline":false,"source":"test = bertin.match(countries, \"id\", data, \"iso3\")\n"},{"methodName":"interpret","cellName":"ojs-cell-12","inline":false,"source":"test.unmatched_geom\n"},{"methodName":"interpret","cellName":"ojs-cell-13","inline":false,"source":"africa = bertin.merge(countries, \"id\", data, \"iso3\")\n"},{"methodName":"interpret","cellName":"ojs-cell-14","inline":false,"source":"bertin.draw({\n  params : {width : 500, background: \"#CCC\", margin: 20}, \n  layers :\n    [\n      {geojson: africa, fill: \"#e07edd\"},\n      {type: \"header\", text: \"Le continent africain\"},\n      {type: \"scalebar\"}\n    ]\n  })\n"},{"methodName":"interpret","cellName":"ojs-cell-15","inline":false,"source":"bertin.draw({\n  params : {width : 500, background: \"#CCC\", margin: 20}, \n  layers :\n    [\n      {\n        type : \"bubble\", \n        geojson: africa,\n        values: \"POP\",\n        k: 50, // rayon du plus grand cercle\n        fill: \"red\",\n        leg_x: 30,\n        leg_y: 300,\n        leg_round: 0,\n        leg_title: \"Nombre d'habitants\"\n      },\n      {geojson: africa, fill: \"#DDD\"},\n      {type: \"header\", text: \"Le continent africain\"},\n      {type: \"scalebar\"}\n    ]\n  })\n"},{"methodName":"interpret","cellName":"ojs-cell-16","inline":false,"source":"bertin.draw({\n  params : {width : 500, background: \"#CCC\", margin: 20}, \n  layers :\n    [\n      {\n        geojson: africa, \n        fill: {\n                type : \"typo\",\n                values: \"SUBREG\",\n                leg_x: 30,\n                leg_y: 330,\n                leg_title: \"Sub regions\",\n                txt_missing: \"Pas de données\",\n                pal: \"Tableau10\",\n              }\n      },\n      {type: \"header\", text: \"Le continent africain\"},\n    ]\n  })\n"},{"methodName":"interpret","cellName":"ojs-cell-17","inline":false,"source":"Plot.plot({\n  height: 60,\n  marks: [\n    Plot.dotX(\n      data,\n      Plot.dodgeY({ x: \"IDH\", fill: \"red\" })\n    )\n  ]\n})\n"},{"methodName":"interpret","cellName":"ojs-cell-18","inline":false,"source":"bertin.draw({\n  params : {width : 500, background: \"#CCC\", margin: 20}, \n  layers :\n    [\n      {\n        geojson: africa, \n        fill: {\n                type : \"choro\",\n                values: \"IDH\",\n                leg_x: 30, // position de la légende en x\n                leg_y: 330, // position de la légende en y\n                leg_round: 2, // 2 chiffres après la virgule\n                leg_title: \"IDH\",\n                txt_missing: \"Pas de données\",\n                method: \"quantile\",\n                nbreaks: 4,\n                colors: \"OrRd\"\n              }\n      },\n      {type: \"header\", text: \"Indicateur de développement humain\"},\n    ]\n  })\n"},{"methodName":"interpret","cellName":"ojs-cell-19","inline":false,"source":"viewof k = Inputs.range([10, 75], { label: \"Taille\", step: 1, value: 40 })\nviewof symbol = Inputs.radio([\"bubble\", \"square\", \"spikes\"], { label: \"Symbole\", value: \"bubble\" })\nviewof color = Inputs.color({label: \"Couleur\", value: \"#CC0000\"})\nviewof toggle = Inputs.toggle({label: \"Ecarter les symboles\", value: false})\n\nbertin.draw({\n  params : {width : 500, background: \"#CCC\", margin: 20}, \n  layers :\n    [\n      {\n        type : symbol, \n        geojson: africa,\n        values: \"POP\",\n        k: k, // rayon du plus grand cercle\n        fill: color,\n        dorling: toggle,\n        leg_x: 30,\n        leg_y: 300,\n        leg_round: 0,\n        leg_title: \"Nombre d'habitants\",\n        //tooltip: [\"$name\", \"$POP\"]\n        tooltip: [\"$name\", d => Math.round(d.properties.POP) + \" millions d'habitants\"]        \n      },\n      {geojson: africa, fill: \"#DDD\"},\n      {type: \"header\", text: \"Le continent africain\"},\n      {type: \"scalebar\"}\n    ]\n  })\n"},{"methodName":"interpretQuiet","source":"shinyInput('k')"},{"methodName":"interpretQuiet","source":"shinyInput('symbol')"},{"methodName":"interpretQuiet","source":"shinyInput('color')"},{"methodName":"interpretQuiet","source":"shinyInput('toggle')"}]}
</script>
<script type="module">
window._ojs.paths.runtimeToDoc = "../../..";
window._ojs.paths.runtimeToRoot = "../../..";
window._ojs.paths.docToRoot = "";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb21" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "TP1 - Savoir faire des cartes interactives avec Quarto et `bertin`"</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span><span class="co"> </span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: false</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: false</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co">    code-summary: "Show the code"</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="an">execute:</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="co">  echo: true</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>**L'objectif de ce TP est d'apprendre à créer des cartes interactives avec Quarto et la bibliothèque JavaScript `bertin`.**</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a><span class="al">![](img/banner.png)</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>**Responsables pédagogiques**</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>Manhamady OUEDRAOGO (Burkina Faso) &amp; Nicolas LAMBERT (France)</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>**Ont participé à l'élaboration de ce module**</span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>Claude GRASLAND (France), Souleymane Sidi TRAORE (Mali), Malika MADELIN (France), Sébastien REY-COYREHOURCQ (France), Vakaramoko BAMBA (Côte d’Ivoire), Hugues PECOUT (France), Yentougle MOUTORE (Togo), Bénédicte GARNIER (France), Côomlan Charles HOUNTON (Bénin), Pauline GLUSKI (France).</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a><span class="fu"># 1. Démarrer avec Quarto</span></span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a><span class="fu">## 1.1 Environnement logiciel.</span></span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>Ce TP s'effectue dans le logiciel RStudio. Pour l'installer, vous pouvez vous rendre sur <span class="co">[</span><span class="ot">cette page</span><span class="co">](https://posit.co/download/rstudio-desktop)</span>. Puis, vous devez installer <span class="co">[</span><span class="ot">Quarto</span><span class="co">](https://quarto.org/docs/get-started/)</span>. </span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a><span class="al">![](img/quartoinstall.png)</span></span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a><span class="fu">## 1.2 Créer un document Quarto</span></span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Ouvrir le logiciel RStudio</span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>créer un document Quarto (file &gt; New File &gt; Quarto Document)</span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a><span class="al">![](img/create.png)</span></span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>cliquer sur "Create Empty Document". </span>
<span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Mettez votre nom</span>
<span id="cb21-43"><a href="#cb21-43" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Sauvegardez le fichier dans le dossier de votre choix.</span>
<span id="cb21-44"><a href="#cb21-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-45"><a href="#cb21-45" aria-hidden="true" tabindex="-1"></a><span class="fu">## 1.3 Rappel des principes</span></span>
<span id="cb21-46"><a href="#cb21-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-47"><a href="#cb21-47" aria-hidden="true" tabindex="-1"></a>Les chunks ojs....</span>
<span id="cb21-48"><a href="#cb21-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-49"><a href="#cb21-49" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>l'ordre des cellules n'a pas d'importance</span>
<span id="cb21-50"><a href="#cb21-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-51"><a href="#cb21-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-52"><a href="#cb21-52" aria-hidden="true" tabindex="-1"></a>Toutes les instructions à suivre s'écrivent dans des chunks ojs</span>
<span id="cb21-53"><a href="#cb21-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-54"><a href="#cb21-54" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb21-55"><a href="#cb21-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-56"><a href="#cb21-56" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-57"><a href="#cb21-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-58"><a href="#cb21-58" aria-hidden="true" tabindex="-1"></a>Pour générer le document, il faut clicher sur le bouton <span class="in">`render`</span> (Ctrl+Shift+K)</span>
<span id="cb21-59"><a href="#cb21-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-60"><a href="#cb21-60" aria-hidden="true" tabindex="-1"></a><span class="fu">## 1.4 Documentation et exemples</span></span>
<span id="cb21-61"><a href="#cb21-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-62"><a href="#cb21-62" aria-hidden="true" tabindex="-1"></a>Au fil de ce notebook, vous pourrez vous référez à des éléments de documentation en cliquant sur cet icône.</span>
<span id="cb21-63"><a href="#cb21-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-64"><a href="#cb21-64" aria-hidden="true" tabindex="-1"></a><span class="al">![](img/logo_doc.png)</span></span>
<span id="cb21-65"><a href="#cb21-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-66"><a href="#cb21-66" aria-hidden="true" tabindex="-1"></a>Vous pourrez également accéder à des exemples pédagogiques et des demos en ligne en cliquant sur celui-là.</span>
<span id="cb21-67"><a href="#cb21-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-68"><a href="#cb21-68" aria-hidden="true" tabindex="-1"></a><span class="al">![](img/logo_exemple.png)</span></span>
<span id="cb21-69"><a href="#cb21-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-70"><a href="#cb21-70" aria-hidden="true" tabindex="-1"></a><span class="fu"># 2. Les données</span></span>
<span id="cb21-71"><a href="#cb21-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-72"><a href="#cb21-72" aria-hidden="true" tabindex="-1"></a>Présentation des données....</span>
<span id="cb21-73"><a href="#cb21-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-74"><a href="#cb21-74" aria-hidden="true" tabindex="-1"></a><span class="fu">## 2.1 Import des données attributaires</span></span>
<span id="cb21-75"><a href="#cb21-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-76"><a href="#cb21-76" aria-hidden="true" tabindex="-1"></a>Dans {ojs}, on importe les données avec l'instruction <span class="in">`FileAttachment()`</span> <span class="kw">&lt;a</span> <span class="er">href</span><span class="ot">=</span><span class="st">"https://github.com/observablehq/stdlib#file-attachments"</span><span class="kw">&gt;&lt;img</span> <span class="er">src</span><span class="ot">=</span><span class="st">"img/logo_doc.png"</span><span class="kw">&gt;&lt;/a&gt;</span></span>
<span id="cb21-77"><a href="#cb21-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-78"><a href="#cb21-78" aria-hidden="true" tabindex="-1"></a>La fonction <span class="in">`.xlsx()`</span> <span class="kw">&lt;a</span> <span class="er">href</span><span class="ot">=</span><span class="st">"https://observablehq.com/@observablehq/xlsx"</span><span class="kw">&gt;&lt;img</span> <span class="er">src</span><span class="ot">=</span><span class="st">"img/logo_exemple.png"</span><span class="kw">&gt;&lt;/a&gt;</span> permet d'importer des tableurs excel.</span>
<span id="cb21-79"><a href="#cb21-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-82"><a href="#cb21-82" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb21-83"><a href="#cb21-83" aria-hidden="true" tabindex="-1"></a>classeur <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data/afrika.xlsx"</span>)<span class="op">.</span><span class="fu">xlsx</span>()</span>
<span id="cb21-84"><a href="#cb21-84" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span></span>
<span id="cb21-85"><a href="#cb21-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-86"><a href="#cb21-86" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span>classeur<span class="op">.</span><span class="fu">sheetNames</span><span class="vs">` permet de voir la liste des feuilles contenues dans le classeur excel</span></span>
<span id="cb21-87"><a href="#cb21-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-90"><a href="#cb21-90" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb21-91"><a href="#cb21-91" aria-hidden="true" tabindex="-1"></a>classeur<span class="op">.</span><span class="at">sheetNames</span></span>
<span id="cb21-92"><a href="#cb21-92" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span></span>
<span id="cb21-93"><a href="#cb21-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-94"><a href="#cb21-94" aria-hidden="true" tabindex="-1"></a><span class="vs">Visualisons les metadonnées avec `</span>Inputs<span class="op">.</span><span class="fu">table</span>()<span class="vs">` &lt;a href="https://github.com/observablehq/inputs#inputstabledata-options"&gt;&lt;img src="img/logo_doc.png"&gt;&lt;/a&gt;</span></span>
<span id="cb21-95"><a href="#cb21-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-98"><a href="#cb21-98" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb21-99"><a href="#cb21-99" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">table</span>(classeur<span class="op">.</span><span class="fu">sheet</span>(<span class="st">"meta"</span><span class="op">,</span> {<span class="dt">headers</span><span class="op">:</span><span class="kw">true</span>}))</span>
<span id="cb21-100"><a href="#cb21-100" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span></span>
<span id="cb21-101"><a href="#cb21-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-102"><a href="#cb21-102" aria-hidden="true" tabindex="-1"></a><span class="vs">Et créons une variable `</span><span class="fu">data</span><span class="vs">` contenant les données de feuille data</span></span>
<span id="cb21-103"><a href="#cb21-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-106"><a href="#cb21-106" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb21-107"><a href="#cb21-107" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> classeur<span class="op">.</span><span class="fu">sheet</span>(<span class="st">"data"</span><span class="op">,</span> {<span class="dt">headers</span><span class="op">:</span><span class="kw">true</span>})</span>
<span id="cb21-108"><a href="#cb21-108" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span></span>
<span id="cb21-109"><a href="#cb21-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-110"><a href="#cb21-110" aria-hidden="true" tabindex="-1"></a><span class="vs">Visualisons-la.</span></span>
<span id="cb21-111"><a href="#cb21-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-114"><a href="#cb21-114" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb21-115"><a href="#cb21-115" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">table</span>(data)</span>
<span id="cb21-116"><a href="#cb21-116" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span></span>
<span id="cb21-117"><a href="#cb21-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-118"><a href="#cb21-118" aria-hidden="true" tabindex="-1"></a><span class="vs">## 2.2 Import des données géométriques</span></span>
<span id="cb21-119"><a href="#cb21-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-120"><a href="#cb21-120" aria-hidden="true" tabindex="-1"></a><span class="vs">Import du fond de carte</span></span>
<span id="cb21-121"><a href="#cb21-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-124"><a href="#cb21-124" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb21-125"><a href="#cb21-125" aria-hidden="true" tabindex="-1"></a>countries <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data/africa.json"</span>)<span class="op">.</span><span class="fu">json</span>()</span>
<span id="cb21-126"><a href="#cb21-126" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span></span>
<span id="cb21-127"><a href="#cb21-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-128"><a href="#cb21-128" aria-hidden="true" tabindex="-1"></a><span class="vs">Le fond de carte est au format geoJSON</span></span>
<span id="cb21-129"><a href="#cb21-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-132"><a href="#cb21-132" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb21-133"><a href="#cb21-133" aria-hidden="true" tabindex="-1"></a>countries</span>
<span id="cb21-134"><a href="#cb21-134" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span></span>
<span id="cb21-135"><a href="#cb21-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-136"><a href="#cb21-136" aria-hidden="true" tabindex="-1"></a><span class="vs">Pour la visualiser, on a besoin d'importer une bibliothèque de cartographie. Ici, on choisit la bibliothèque `</span><span class="fu">bertin</span><span class="vs">` &lt;a href="https://github.com/neocarto/bertin"&gt;&lt;img src="img/logo_doc.png"&gt;&lt;/a&gt; On l'importe grace à l'instruction `</span><span class="fu">require</span>()<span class="vs">`. </span></span>
<span id="cb21-137"><a href="#cb21-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-140"><a href="#cb21-140" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb21-141"><a href="#cb21-141" aria-hidden="true" tabindex="-1"></a>bertin <span class="op">=</span> <span class="pp">require</span>(<span class="st">"bertin@1.5.10"</span>)</span>
<span id="cb21-142"><a href="#cb21-142" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span></span>
<span id="cb21-143"><a href="#cb21-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-144"><a href="#cb21-144" aria-hidden="true" tabindex="-1"></a><span class="vs">La fonction `</span><span class="fu">quickdraw</span>()<span class="vs">` &lt;a href="https://observablehq.com/@neocartocnrs/bertin-js-quickdraw-table2geo"&gt;&lt;img src="img/logo_exemple.png"&gt;&lt;/a&gt; permet de visualiser rapidement n'importe quel fond de carte.</span></span>
<span id="cb21-145"><a href="#cb21-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-148"><a href="#cb21-148" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb21-149"><a href="#cb21-149" aria-hidden="true" tabindex="-1"></a>bertin<span class="op">.</span><span class="fu">quickdraw</span>(countries<span class="op">,</span> <span class="dv">500</span>)</span>
<span id="cb21-150"><a href="#cb21-150" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span></span>
<span id="cb21-151"><a href="#cb21-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-152"><a href="#cb21-152" aria-hidden="true" tabindex="-1"></a><span class="vs">Pour récupérer la table attributaire, on utilise l'instruction `</span>bertin<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="fu">table</span>()<span class="vs">` &lt;a href="https://github.com/neocarto/bertin#propertiestable"&gt;&lt;img src="img/logo_doc.png"&gt;&lt;/a&gt;. Puis, on peut la visualiser sous forme de tableau avec `</span>Inputs<span class="op">.</span><span class="fu">table</span>()<span class="vs">`.</span></span>
<span id="cb21-153"><a href="#cb21-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-156"><a href="#cb21-156" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb21-157"><a href="#cb21-157" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">table</span>(bertin<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="fu">table</span>(countries))</span>
<span id="cb21-158"><a href="#cb21-158" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span></span>
<span id="cb21-159"><a href="#cb21-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-160"><a href="#cb21-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-161"><a href="#cb21-161" aria-hidden="true" tabindex="-1"></a><span class="vs"># 2. Création de carte statiques</span></span>
<span id="cb21-162"><a href="#cb21-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-163"><a href="#cb21-163" aria-hidden="true" tabindex="-1"></a><span class="vs">## 2.1 Jointure</span></span>
<span id="cb21-164"><a href="#cb21-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-165"><a href="#cb21-165" aria-hidden="true" tabindex="-1"></a><span class="vs">La première chose à faire est de réaliser une jointure entre les données et le fond de carte. Pour cea on va procéder en 2 étapes. `</span>bertin<span class="op">.</span><span class="fu">match</span><span class="vs">` &lt;a href="https://github.com/neocarto/bertin#match"&gt;&lt;img src="img/logo_doc.png"&gt;&lt;/a&gt; permet de tester et visaliser le compatibilité entre le fond de carte et le tableau de données. `</span>bertin<span class="op">.</span><span class="fu">merge</span><span class="vs">` &lt;a href="https://github.com/neocarto/bertin#merge"&gt;&lt;img src="img/logo_doc.png"&gt;&lt;/a&gt; permet d'effectuer réellement cette jointure. &lt;a href="https://observablehq.com/@neocartocnrs/bertin-js-match-and-merge?collection=@neocartocnrs/bertin"&gt;&lt;img src="img/logo_exemple.png"&gt;&lt;/a&gt;</span></span>
<span id="cb21-166"><a href="#cb21-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-169"><a href="#cb21-169" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb21-170"><a href="#cb21-170" aria-hidden="true" tabindex="-1"></a>test <span class="op">=</span> bertin<span class="op">.</span><span class="fu">match</span>(countries<span class="op">,</span> <span class="st">"id"</span><span class="op">,</span> data<span class="op">,</span> <span class="st">"iso3"</span>)</span>
<span id="cb21-171"><a href="#cb21-171" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span></span>
<span id="cb21-172"><a href="#cb21-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-173"><a href="#cb21-173" aria-hidden="true" tabindex="-1"></a><span class="vs">On constate que le jeu de données et le fond de carte sont compatibles à 98%. Toutes les données disponibles dans le jeu de données peuvent être jointe avec le fond de carte (49/49). Seule une unité géographique dans le fond de carte n'a pas d'&amp;quivalent dans le tableau de données (49/50). Pour savoir de quelle unité il s'agit, on peut taper `</span>test<span class="op">.</span><span class="fu">unmatched_geom</span><span class="vs">`</span></span>
<span id="cb21-174"><a href="#cb21-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-177"><a href="#cb21-177" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb21-178"><a href="#cb21-178" aria-hidden="true" tabindex="-1"></a>test<span class="op">.</span><span class="at">unmatched_geom</span></span>
<span id="cb21-179"><a href="#cb21-179" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span></span>
<span id="cb21-180"><a href="#cb21-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-181"><a href="#cb21-181" aria-hidden="true" tabindex="-1"></a><span class="vs">Il s'agit du Sahara Occidental. Il n'y a en effet pas de données pour cette unité géographique. On peut donc décider d'effecter la jointure pour de bon et de créer un nouvel objet `</span><span class="fu">africa</span><span class="vs">`. Cet objet contient à la fois les données et les géométries. </span></span>
<span id="cb21-182"><a href="#cb21-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-185"><a href="#cb21-185" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb21-186"><a href="#cb21-186" aria-hidden="true" tabindex="-1"></a>africa <span class="op">=</span> bertin<span class="op">.</span><span class="fu">merge</span>(countries<span class="op">,</span> <span class="st">"id"</span><span class="op">,</span> data<span class="op">,</span> <span class="st">"iso3"</span>)</span>
<span id="cb21-187"><a href="#cb21-187" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span></span>
<span id="cb21-188"><a href="#cb21-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-189"><a href="#cb21-189" aria-hidden="true" tabindex="-1"></a><span class="vs">## 2.2 Réaliser des cartes avec `</span><span class="fu">bertin</span><span class="vs">`</span></span>
<span id="cb21-190"><a href="#cb21-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-191"><a href="#cb21-191" aria-hidden="true" tabindex="-1"></a><span class="vs">Pour réaliser une carte avec la bibliothèque `</span><span class="fu">bertin</span><span class="vs">`, on utilise la fonction `</span><span class="fu">draw</span>()<span class="vs">` &lt;a href="https://github.com/neocarto/bertin#drawing-a-map"&gt;&lt;img src="img/logo_doc.png"&gt;&lt;/a&gt;.</span></span>
<span id="cb21-192"><a href="#cb21-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-193"><a href="#cb21-193" aria-hidden="true" tabindex="-1"></a><span class="vs">La fonction prend en entrée un objet avec la structure suivante &lt;a href="https://observablehq.com/@neocartocnrs/hello-bertin-js?collection=@neocartocnrs/bertin"&gt;&lt;img src="img/logo_exemple.png"&gt;&lt;/a&gt; :</span></span>
<span id="cb21-194"><a href="#cb21-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-195"><a href="#cb21-195" aria-hidden="true" tabindex="-1"></a><span class="vs">![](img/bertin_code.png)</span></span>
<span id="cb21-196"><a href="#cb21-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-197"><a href="#cb21-197" aria-hidden="true" tabindex="-1"></a><span class="vs">Ainsi, on peut écrire : </span></span>
<span id="cb21-198"><a href="#cb21-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-201"><a href="#cb21-201" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb21-202"><a href="#cb21-202" aria-hidden="true" tabindex="-1"></a>bertin<span class="op">.</span><span class="fu">draw</span>({</span>
<span id="cb21-203"><a href="#cb21-203" aria-hidden="true" tabindex="-1"></a>  <span class="dt">params</span> <span class="op">:</span> {<span class="dt">width</span> <span class="op">:</span> <span class="dv">500</span><span class="op">,</span> <span class="dt">background</span><span class="op">:</span> <span class="st">"#CCC"</span><span class="op">,</span> <span class="dt">margin</span><span class="op">:</span> <span class="dv">20</span>}<span class="op">,</span> </span>
<span id="cb21-204"><a href="#cb21-204" aria-hidden="true" tabindex="-1"></a>  <span class="dt">layers</span> <span class="op">:</span></span>
<span id="cb21-205"><a href="#cb21-205" aria-hidden="true" tabindex="-1"></a>    [</span>
<span id="cb21-206"><a href="#cb21-206" aria-hidden="true" tabindex="-1"></a>      {<span class="dt">geojson</span><span class="op">:</span> africa<span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#e07edd"</span>}<span class="op">,</span></span>
<span id="cb21-207"><a href="#cb21-207" aria-hidden="true" tabindex="-1"></a>      {<span class="dt">type</span><span class="op">:</span> <span class="st">"header"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"Le continent africain"</span>}<span class="op">,</span></span>
<span id="cb21-208"><a href="#cb21-208" aria-hidden="true" tabindex="-1"></a>      {<span class="dt">type</span><span class="op">:</span> <span class="st">"scalebar"</span>}</span>
<span id="cb21-209"><a href="#cb21-209" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb21-210"><a href="#cb21-210" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb21-211"><a href="#cb21-211" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span></span>
<span id="cb21-212"><a href="#cb21-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-213"><a href="#cb21-213" aria-hidden="true" tabindex="-1"></a><span class="vs">Le type de carte thématique qu'on va réaliser dépend du type de données à représenter.</span></span>
<span id="cb21-214"><a href="#cb21-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-215"><a href="#cb21-215" aria-hidden="true" tabindex="-1"></a><span class="vs">## 2.3. Cartographier des données quantitatives aboslues (stock)</span></span>
<span id="cb21-216"><a href="#cb21-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-217"><a href="#cb21-217" aria-hidden="true" tabindex="-1"></a><span class="vs">En cartographie, on représente des données quantitatives absolues avec la variable visuelle TAILLE. Pour avoir des cercles proportionnels, dans `</span><span class="fu">bertin</span><span class="vs">`, on utilisera le type `</span><span class="fu">bubble</span><span class="vs">` &lt;a href="https://github.com/neocarto/bertin#bubble"&gt;&lt;img src="img/logo_doc.png"&gt;&lt;/a&gt;&lt;a href="https://observablehq.com/@neocartocnrs/bertin-js-prop-symbols?collection=@neocartocnrs/bertin"&gt;&lt;img src="img/logo_exemple.png"&gt;&lt;/a&gt;</span></span>
<span id="cb21-218"><a href="#cb21-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-221"><a href="#cb21-221" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb21-222"><a href="#cb21-222" aria-hidden="true" tabindex="-1"></a>bertin<span class="op">.</span><span class="fu">draw</span>({</span>
<span id="cb21-223"><a href="#cb21-223" aria-hidden="true" tabindex="-1"></a>  <span class="dt">params</span> <span class="op">:</span> {<span class="dt">width</span> <span class="op">:</span> <span class="dv">500</span><span class="op">,</span> <span class="dt">background</span><span class="op">:</span> <span class="st">"#CCC"</span><span class="op">,</span> <span class="dt">margin</span><span class="op">:</span> <span class="dv">20</span>}<span class="op">,</span> </span>
<span id="cb21-224"><a href="#cb21-224" aria-hidden="true" tabindex="-1"></a>  <span class="dt">layers</span> <span class="op">:</span></span>
<span id="cb21-225"><a href="#cb21-225" aria-hidden="true" tabindex="-1"></a>    [</span>
<span id="cb21-226"><a href="#cb21-226" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb21-227"><a href="#cb21-227" aria-hidden="true" tabindex="-1"></a>        <span class="dt">type</span> <span class="op">:</span> <span class="st">"bubble"</span><span class="op">,</span> </span>
<span id="cb21-228"><a href="#cb21-228" aria-hidden="true" tabindex="-1"></a>        <span class="dt">geojson</span><span class="op">:</span> africa<span class="op">,</span></span>
<span id="cb21-229"><a href="#cb21-229" aria-hidden="true" tabindex="-1"></a>        <span class="dt">values</span><span class="op">:</span> <span class="st">"POP"</span><span class="op">,</span></span>
<span id="cb21-230"><a href="#cb21-230" aria-hidden="true" tabindex="-1"></a>        <span class="dt">k</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="co">// rayon du plus grand cercle</span></span>
<span id="cb21-231"><a href="#cb21-231" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fill</span><span class="op">:</span> <span class="st">"red"</span><span class="op">,</span></span>
<span id="cb21-232"><a href="#cb21-232" aria-hidden="true" tabindex="-1"></a>        <span class="dt">leg_x</span><span class="op">:</span> <span class="dv">30</span><span class="op">,</span></span>
<span id="cb21-233"><a href="#cb21-233" aria-hidden="true" tabindex="-1"></a>        <span class="dt">leg_y</span><span class="op">:</span> <span class="dv">300</span><span class="op">,</span></span>
<span id="cb21-234"><a href="#cb21-234" aria-hidden="true" tabindex="-1"></a>        <span class="dt">leg_round</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb21-235"><a href="#cb21-235" aria-hidden="true" tabindex="-1"></a>        <span class="dt">leg_title</span><span class="op">:</span> <span class="st">"Nombre d'habitants"</span></span>
<span id="cb21-236"><a href="#cb21-236" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb21-237"><a href="#cb21-237" aria-hidden="true" tabindex="-1"></a>      {<span class="dt">geojson</span><span class="op">:</span> africa<span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#DDD"</span>}<span class="op">,</span></span>
<span id="cb21-238"><a href="#cb21-238" aria-hidden="true" tabindex="-1"></a>      {<span class="dt">type</span><span class="op">:</span> <span class="st">"header"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"Le continent africain"</span>}<span class="op">,</span></span>
<span id="cb21-239"><a href="#cb21-239" aria-hidden="true" tabindex="-1"></a>      {<span class="dt">type</span><span class="op">:</span> <span class="st">"scalebar"</span>}</span>
<span id="cb21-240"><a href="#cb21-240" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb21-241"><a href="#cb21-241" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb21-242"><a href="#cb21-242" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span></span>
<span id="cb21-243"><a href="#cb21-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-244"><a href="#cb21-244" aria-hidden="true" tabindex="-1"></a><span class="vs">D'autres modes de représentation auraient bien sûr été possibles. On aurait également pu faire des carrés &lt;a href="https://observablehq.com/@neocartocnrs/bertin-js-prop-squares?collection=@neocartocnrs/bertin"&gt;&lt;img src="img/logo_exemple.png"&gt;&lt;/a&gt; ou des *spikes* &lt;a href="https://observablehq.com/@neocartocnrs/bertin-js-spikes?collection=@neocartocnrs/bertin"&gt;&lt;img src="img/logo_exemple.png"&gt;&lt;/a&gt; </span></span>
<span id="cb21-245"><a href="#cb21-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-246"><a href="#cb21-246" aria-hidden="true" tabindex="-1"></a><span class="vs">## 2.4 Cartographier des données qualitatives nominales</span></span>
<span id="cb21-247"><a href="#cb21-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-248"><a href="#cb21-248" aria-hidden="true" tabindex="-1"></a><span class="vs">Il y a plusieurs façons de cartographier des données qualitatives nominales. Sur écran, en cartographie numérique, on choisra la plupart du temps la variable visuelle COULEUR (teinte).  </span></span>
<span id="cb21-249"><a href="#cb21-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-250"><a href="#cb21-250" aria-hidden="true" tabindex="-1"></a><span class="vs">Dans `</span><span class="fu">bertin</span><span class="vs">`, il s'agit donc de faire varier la propriété `</span><span class="fu">fill</span><span class="vs">` et de la faire varier en fonction d'une donnée qualitative. Pour cela, on utilise le type `</span><span class="fu">typo</span><span class="vs">` &lt;a href="https://github.com/neocarto/bertin#typology"&gt;&lt;img src="img/logo_doc.png"&gt;&lt;/a&gt;&lt;a href="https://observablehq.com/@neocartocnrs/bertin-js-typo?collection=@neocartocnrs/bertin"&gt;&lt;img src="img/logo_exemple.png"&gt;&lt;/a&gt;.</span></span>
<span id="cb21-251"><a href="#cb21-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-252"><a href="#cb21-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-255"><a href="#cb21-255" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb21-256"><a href="#cb21-256" aria-hidden="true" tabindex="-1"></a>bertin<span class="op">.</span><span class="fu">draw</span>({</span>
<span id="cb21-257"><a href="#cb21-257" aria-hidden="true" tabindex="-1"></a>  <span class="dt">params</span> <span class="op">:</span> {<span class="dt">width</span> <span class="op">:</span> <span class="dv">500</span><span class="op">,</span> <span class="dt">background</span><span class="op">:</span> <span class="st">"#CCC"</span><span class="op">,</span> <span class="dt">margin</span><span class="op">:</span> <span class="dv">20</span>}<span class="op">,</span> </span>
<span id="cb21-258"><a href="#cb21-258" aria-hidden="true" tabindex="-1"></a>  <span class="dt">layers</span> <span class="op">:</span></span>
<span id="cb21-259"><a href="#cb21-259" aria-hidden="true" tabindex="-1"></a>    [</span>
<span id="cb21-260"><a href="#cb21-260" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb21-261"><a href="#cb21-261" aria-hidden="true" tabindex="-1"></a>        <span class="dt">geojson</span><span class="op">:</span> africa<span class="op">,</span> </span>
<span id="cb21-262"><a href="#cb21-262" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fill</span><span class="op">:</span> {</span>
<span id="cb21-263"><a href="#cb21-263" aria-hidden="true" tabindex="-1"></a>                <span class="dt">type</span> <span class="op">:</span> <span class="st">"typo"</span><span class="op">,</span></span>
<span id="cb21-264"><a href="#cb21-264" aria-hidden="true" tabindex="-1"></a>                <span class="dt">values</span><span class="op">:</span> <span class="st">"SUBREG"</span><span class="op">,</span></span>
<span id="cb21-265"><a href="#cb21-265" aria-hidden="true" tabindex="-1"></a>                <span class="dt">leg_x</span><span class="op">:</span> <span class="dv">30</span><span class="op">,</span></span>
<span id="cb21-266"><a href="#cb21-266" aria-hidden="true" tabindex="-1"></a>                <span class="dt">leg_y</span><span class="op">:</span> <span class="dv">330</span><span class="op">,</span></span>
<span id="cb21-267"><a href="#cb21-267" aria-hidden="true" tabindex="-1"></a>                <span class="dt">leg_title</span><span class="op">:</span> <span class="st">"Sub regions"</span><span class="op">,</span></span>
<span id="cb21-268"><a href="#cb21-268" aria-hidden="true" tabindex="-1"></a>                <span class="dt">txt_missing</span><span class="op">:</span> <span class="st">"Pas de données"</span><span class="op">,</span></span>
<span id="cb21-269"><a href="#cb21-269" aria-hidden="true" tabindex="-1"></a>                <span class="dt">pal</span><span class="op">:</span> <span class="st">"Tableau10"</span><span class="op">,</span></span>
<span id="cb21-270"><a href="#cb21-270" aria-hidden="true" tabindex="-1"></a>              }</span>
<span id="cb21-271"><a href="#cb21-271" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb21-272"><a href="#cb21-272" aria-hidden="true" tabindex="-1"></a>      {<span class="dt">type</span><span class="op">:</span> <span class="st">"header"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"Le continent africain"</span>}<span class="op">,</span></span>
<span id="cb21-273"><a href="#cb21-273" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb21-274"><a href="#cb21-274" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb21-275"><a href="#cb21-275" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span></span>
<span id="cb21-276"><a href="#cb21-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-277"><a href="#cb21-277" aria-hidden="true" tabindex="-1"></a><span class="vs">La palette de couleurs oar défaut est `</span><span class="fu">Tableau10</span><span class="vs">`. Mais il est possible d'en choisir une autre : `</span><span class="fu">Category10</span><span class="vs">`, `</span><span class="fu">Accent</span><span class="vs">`, `</span><span class="fu">Dark2</span><span class="vs">`, `</span><span class="fu">Paired</span><span class="vs">`, `</span><span class="fu">Pastel1</span><span class="vs">`, `</span><span class="fu">Pastel2</span><span class="vs">`, `</span><span class="fu">Set1</span><span class="vs">`, `</span><span class="fu">Set2</span><span class="vs">` ou `</span><span class="fu">Set3</span><span class="vs">` &lt;a href="https://observablehq.com/@d3/color-schemes"&gt;&lt;img src="img/logo_exemple.png"&gt;&lt;/a&gt;.</span></span>
<span id="cb21-278"><a href="#cb21-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-279"><a href="#cb21-279" aria-hidden="true" tabindex="-1"></a><span class="vs">Il est aussi possible de définir vos propres couleurs en replaçant `</span>pal<span class="op">:</span> <span class="st">"Tableau10"</span><span class="vs">` par `</span>colors<span class="op">:</span> [<span class="st">"#8dd3c7"</span><span class="op">,</span><span class="st">"#ffffb3"</span><span class="op">,</span><span class="st">"#bebada"</span><span class="op">,</span><span class="st">"#fb8072"</span><span class="op">,</span><span class="st">"#80b1d3"</span>]<span class="vs">`.</span></span>
<span id="cb21-280"><a href="#cb21-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-281"><a href="#cb21-281" aria-hidden="true" tabindex="-1"></a><span class="vs">## 2.5 Cartographier des données quantitatives relatives (ratio, indice)</span></span>
<span id="cb21-282"><a href="#cb21-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-283"><a href="#cb21-283" aria-hidden="true" tabindex="-1"></a><span class="vs">Il y a plusieurs façons de cartographier des données quantitatives relatives. Sur écran, en cartographie numérique, on choisra la plupart du temps de réaliser une carte choroplèthe avec des couleurs ordonnées. Un étape de discrétisation préalable est nécéssaire. Elle nécessite d'étudier la forme de la distribution statistique. Pour celà, on utilisera la librairie `</span><span class="fu">Plot</span><span class="vs">` &lt;a href="https://github.com/observablehq/plot"&gt;&lt;img src="img/logo_doc.png"&gt;&lt;/a&gt; &lt;a href="https://observablehq.com/collection/@observablehq/plot"&gt;&lt;img src="img/logo_exemple.png"&gt;&lt;/a&gt; disponible nativement dans les celles `</span>{ojs}<span class="vs">`.</span></span>
<span id="cb21-284"><a href="#cb21-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-285"><a href="#cb21-285" aria-hidden="true" tabindex="-1"></a><span class="vs">Il y a plusieurs façons de visualister la forme d'une distribution &lt;a href="https://observablehq.com/@cartographie/les-discretisations?collection=@cartographie/cours"&gt;&lt;img src="img/logo_exemple.png"&gt;&lt;/a&gt; Ici, on choisira un graphique avec des points et une transformation de type dodge.</span></span>
<span id="cb21-286"><a href="#cb21-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-289"><a href="#cb21-289" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb21-290"><a href="#cb21-290" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb21-291"><a href="#cb21-291" aria-hidden="true" tabindex="-1"></a>  <span class="dt">height</span><span class="op">:</span> <span class="dv">60</span><span class="op">,</span></span>
<span id="cb21-292"><a href="#cb21-292" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb21-293"><a href="#cb21-293" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">dotX</span>(</span>
<span id="cb21-294"><a href="#cb21-294" aria-hidden="true" tabindex="-1"></a>      data<span class="op">,</span></span>
<span id="cb21-295"><a href="#cb21-295" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">dodgeY</span>({ <span class="dt">x</span><span class="op">:</span> <span class="st">"IDH"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"red"</span> })</span>
<span id="cb21-296"><a href="#cb21-296" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-297"><a href="#cb21-297" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb21-298"><a href="#cb21-298" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb21-299"><a href="#cb21-299" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span></span>
<span id="cb21-300"><a href="#cb21-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-301"><a href="#cb21-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-302"><a href="#cb21-302" aria-hidden="true" tabindex="-1"></a><span class="vs">Dans `</span><span class="fu">bertin</span><span class="vs">`, il s'agit donc de faire varier comme précédemment la propriété `</span><span class="fu">fill</span><span class="vs">`. Pour cela, on utilise le type `</span><span class="fu">choro</span><span class="vs">` &lt;a href="https://github.com/neocarto/bertin#choropleth"&gt;&lt;img src="img/logo_doc.png"&gt;&lt;/a&gt; &lt;a href="https://observablehq.com/@neocartocnrs/bertin-js-chropoleth?collection=@neocartocnrs/bertin"&gt;&lt;img src="img/logo_exemple.png"&gt;&lt;/a&gt;</span></span>
<span id="cb21-303"><a href="#cb21-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-304"><a href="#cb21-304" aria-hidden="true" tabindex="-1"></a><span class="vs">Les méthodes de discrétisation disponibles son celles contenues dans la libraire `</span><span class="fu">statsbreaks</span><span class="vs">`  &lt;a href="https://observablehq.com/@neocartocnrs/hello-statsbreaks"&gt;&lt;img src="img/logo_exemple.png"&gt;&lt;/a&gt; : `</span><span class="fu">quantile</span><span class="vs">`, `</span><span class="fu">q6</span><span class="vs">`, `</span><span class="fu">jenks</span><span class="vs">`, `</span><span class="fu">msd</span><span class="vs">` (moyenne écart-type) et `</span><span class="fu">equal</span><span class="vs">`. Pour les couleurs, de nombreuses palettes sont disponibles : `</span><span class="fu">Blues</span><span class="vs">`, `</span><span class="fu">Greens</span><span class="vs">`, `</span><span class="fu">Greys</span><span class="vs">`, `</span><span class="fu">Oranges</span><span class="vs">`, `</span><span class="fu">Purples</span><span class="vs">`, `</span><span class="fu">Reds</span><span class="vs">`, `</span><span class="fu">BrBG</span><span class="vs">`, `</span><span class="fu">PRGn</span><span class="vs">`, `</span><span class="fu">PiYG</span><span class="vs">`, `</span><span class="fu">PuOr</span><span class="vs">`, `</span><span class="fu">RdBu</span><span class="vs">`, `</span><span class="fu">RdYlBu</span><span class="vs">`, `</span><span class="fu">RdYlGn</span><span class="vs">`, `</span><span class="fu">Spectral</span><span class="vs">`,`</span><span class="fu">Turbo</span><span class="vs">`,`</span><span class="fu">Viridis</span><span class="vs">`,`</span><span class="fu">Inferno</span><span class="vs">`, `</span><span class="fu">Magma</span><span class="vs">`, `</span><span class="fu">Plasma</span><span class="vs">`, `</span><span class="fu">Cividis</span><span class="vs">`, `</span><span class="fu">Warm</span><span class="vs">`, `</span><span class="fu">Cool</span><span class="vs">`, `</span><span class="fu">CubehelixDefault</span><span class="vs">`, `</span><span class="fu">BuGn</span><span class="vs">`, `</span><span class="fu">BuPu</span><span class="vs">`, `</span><span class="fu">GnBu</span><span class="vs">`, `</span><span class="fu">OrRd</span><span class="vs">`, `</span><span class="fu">PuBuGn</span><span class="vs">`, `</span><span class="fu">PuBu</span><span class="vs">`, `</span><span class="fu">PuRd</span><span class="vs">`, `</span><span class="fu">RdPu</span><span class="vs">`, `</span><span class="fu">YlGnBu</span><span class="vs">`, `</span><span class="fu">YlGn</span><span class="vs">`, `</span><span class="fu">YlOrBr</span><span class="vs">`, `</span><span class="fu">YlOrRd</span><span class="vs">`, `</span><span class="fu">Rainbow</span><span class="vs">`, `</span><span class="fu">Sinebow</span><span class="vs">` &lt;a href="https://observablehq.com/@d3/color-schemes"&gt;&lt;img src="img/logo_exemple.png"&gt;&lt;/a&gt;</span></span>
<span id="cb21-305"><a href="#cb21-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-306"><a href="#cb21-306" aria-hidden="true" tabindex="-1"></a><span class="vs">Par défaut, la méthode choisie est le  `</span><span class="fu">quantile</span><span class="vs">`, la palettes est `</span><span class="fu">Blues</span><span class="vs">` et le nombre de classes est égal à 5.</span></span>
<span id="cb21-307"><a href="#cb21-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-308"><a href="#cb21-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-309"><a href="#cb21-309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-310"><a href="#cb21-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-311"><a href="#cb21-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-312"><a href="#cb21-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-315"><a href="#cb21-315" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb21-316"><a href="#cb21-316" aria-hidden="true" tabindex="-1"></a>bertin<span class="op">.</span><span class="fu">draw</span>({</span>
<span id="cb21-317"><a href="#cb21-317" aria-hidden="true" tabindex="-1"></a>  <span class="dt">params</span> <span class="op">:</span> {<span class="dt">width</span> <span class="op">:</span> <span class="dv">500</span><span class="op">,</span> <span class="dt">background</span><span class="op">:</span> <span class="st">"#CCC"</span><span class="op">,</span> <span class="dt">margin</span><span class="op">:</span> <span class="dv">20</span>}<span class="op">,</span> </span>
<span id="cb21-318"><a href="#cb21-318" aria-hidden="true" tabindex="-1"></a>  <span class="dt">layers</span> <span class="op">:</span></span>
<span id="cb21-319"><a href="#cb21-319" aria-hidden="true" tabindex="-1"></a>    [</span>
<span id="cb21-320"><a href="#cb21-320" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb21-321"><a href="#cb21-321" aria-hidden="true" tabindex="-1"></a>        <span class="dt">geojson</span><span class="op">:</span> africa<span class="op">,</span> </span>
<span id="cb21-322"><a href="#cb21-322" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fill</span><span class="op">:</span> {</span>
<span id="cb21-323"><a href="#cb21-323" aria-hidden="true" tabindex="-1"></a>                <span class="dt">type</span> <span class="op">:</span> <span class="st">"choro"</span><span class="op">,</span></span>
<span id="cb21-324"><a href="#cb21-324" aria-hidden="true" tabindex="-1"></a>                <span class="dt">values</span><span class="op">:</span> <span class="st">"IDH"</span><span class="op">,</span></span>
<span id="cb21-325"><a href="#cb21-325" aria-hidden="true" tabindex="-1"></a>                <span class="dt">leg_x</span><span class="op">:</span> <span class="dv">30</span><span class="op">,</span> <span class="co">// position de la légende en x</span></span>
<span id="cb21-326"><a href="#cb21-326" aria-hidden="true" tabindex="-1"></a>                <span class="dt">leg_y</span><span class="op">:</span> <span class="dv">330</span><span class="op">,</span> <span class="co">// position de la légende en y</span></span>
<span id="cb21-327"><a href="#cb21-327" aria-hidden="true" tabindex="-1"></a>                <span class="dt">leg_round</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="co">// 2 chiffres après la virgule</span></span>
<span id="cb21-328"><a href="#cb21-328" aria-hidden="true" tabindex="-1"></a>                <span class="dt">leg_title</span><span class="op">:</span> <span class="st">"IDH"</span><span class="op">,</span></span>
<span id="cb21-329"><a href="#cb21-329" aria-hidden="true" tabindex="-1"></a>                <span class="dt">txt_missing</span><span class="op">:</span> <span class="st">"Pas de données"</span><span class="op">,</span></span>
<span id="cb21-330"><a href="#cb21-330" aria-hidden="true" tabindex="-1"></a>                <span class="dt">method</span><span class="op">:</span> <span class="st">"quantile"</span><span class="op">,</span></span>
<span id="cb21-331"><a href="#cb21-331" aria-hidden="true" tabindex="-1"></a>                <span class="dt">nbreaks</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span></span>
<span id="cb21-332"><a href="#cb21-332" aria-hidden="true" tabindex="-1"></a>                <span class="dt">colors</span><span class="op">:</span> <span class="st">"OrRd"</span></span>
<span id="cb21-333"><a href="#cb21-333" aria-hidden="true" tabindex="-1"></a>              }</span>
<span id="cb21-334"><a href="#cb21-334" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb21-335"><a href="#cb21-335" aria-hidden="true" tabindex="-1"></a>      {<span class="dt">type</span><span class="op">:</span> <span class="st">"header"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"Indicateur de développement humain"</span>}<span class="op">,</span></span>
<span id="cb21-336"><a href="#cb21-336" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb21-337"><a href="#cb21-337" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb21-338"><a href="#cb21-338" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span></span>
<span id="cb21-339"><a href="#cb21-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-340"><a href="#cb21-340" aria-hidden="true" tabindex="-1"></a><span class="vs"># 3. Création de cartes interactives</span></span>
<span id="cb21-341"><a href="#cb21-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-342"><a href="#cb21-342" aria-hidden="true" tabindex="-1"></a><span class="vs">Avec Observable JavaScript, nous sommes dans un écosystème pleinement réactif 🔥 Cela signifie qu'il est possible de proposer à l'utilisateur des possibilités d'interaction avec la carte. Reprenons le cade de la carte par symboles proportionnels... et personnalisons le un peu en remplaçant les valeurs écrites *en dur* par des valeurs issues des `</span><span class="fu">Inputs</span><span class="vs">` &lt;a href="https://github.com/observablehq/inputs"&gt;&lt;img src="img/logo_doc.png"&gt;&lt;/a&gt; &lt;a href="https://observablehq.com/@observablehq/inputs"&gt;&lt;img src="img/logo_exemple.png"&gt;&lt;/a&gt;</span></span>
<span id="cb21-343"><a href="#cb21-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-344"><a href="#cb21-344" aria-hidden="true" tabindex="-1"></a><span class="vs">Il est également possible d'ajouter des infobulles &lt;a href="https://observablehq.com/@neocartocnrs/bertin-js-tooltips?collection=@neocartocnrs/bertin"&gt;&lt;img src="img/logo_exemple.png"&gt;&lt;/a&gt;</span></span>
<span id="cb21-345"><a href="#cb21-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-346"><a href="#cb21-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-349"><a href="#cb21-349" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb21-350"><a href="#cb21-350" aria-hidden="true" tabindex="-1"></a>viewof k <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">10</span><span class="op">,</span> <span class="dv">75</span>]<span class="op">,</span> { <span class="dt">label</span><span class="op">:</span> <span class="st">"Taille"</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">40</span> })</span>
<span id="cb21-351"><a href="#cb21-351" aria-hidden="true" tabindex="-1"></a>viewof symbol <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">radio</span>([<span class="st">"bubble"</span><span class="op">,</span> <span class="st">"square"</span><span class="op">,</span> <span class="st">"spikes"</span>]<span class="op">,</span> { <span class="dt">label</span><span class="op">:</span> <span class="st">"Symbole"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"bubble"</span> })</span>
<span id="cb21-352"><a href="#cb21-352" aria-hidden="true" tabindex="-1"></a>viewof color <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">color</span>({<span class="dt">label</span><span class="op">:</span> <span class="st">"Couleur"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"#CC0000"</span>})</span>
<span id="cb21-353"><a href="#cb21-353" aria-hidden="true" tabindex="-1"></a>viewof toggle <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">toggle</span>({<span class="dt">label</span><span class="op">:</span> <span class="st">"Ecarter les symboles"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="kw">false</span>})</span>
<span id="cb21-354"><a href="#cb21-354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-355"><a href="#cb21-355" aria-hidden="true" tabindex="-1"></a>bertin<span class="op">.</span><span class="fu">draw</span>({</span>
<span id="cb21-356"><a href="#cb21-356" aria-hidden="true" tabindex="-1"></a>  <span class="dt">params</span> <span class="op">:</span> {<span class="dt">width</span> <span class="op">:</span> <span class="dv">500</span><span class="op">,</span> <span class="dt">background</span><span class="op">:</span> <span class="st">"#CCC"</span><span class="op">,</span> <span class="dt">margin</span><span class="op">:</span> <span class="dv">20</span>}<span class="op">,</span> </span>
<span id="cb21-357"><a href="#cb21-357" aria-hidden="true" tabindex="-1"></a>  <span class="dt">layers</span> <span class="op">:</span></span>
<span id="cb21-358"><a href="#cb21-358" aria-hidden="true" tabindex="-1"></a>    [</span>
<span id="cb21-359"><a href="#cb21-359" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb21-360"><a href="#cb21-360" aria-hidden="true" tabindex="-1"></a>        <span class="dt">type</span> <span class="op">:</span> symbol<span class="op">,</span> </span>
<span id="cb21-361"><a href="#cb21-361" aria-hidden="true" tabindex="-1"></a>        <span class="dt">geojson</span><span class="op">:</span> africa<span class="op">,</span></span>
<span id="cb21-362"><a href="#cb21-362" aria-hidden="true" tabindex="-1"></a>        <span class="dt">values</span><span class="op">:</span> <span class="st">"POP"</span><span class="op">,</span></span>
<span id="cb21-363"><a href="#cb21-363" aria-hidden="true" tabindex="-1"></a>        <span class="dt">k</span><span class="op">:</span> k<span class="op">,</span> <span class="co">// rayon du plus grand cercle</span></span>
<span id="cb21-364"><a href="#cb21-364" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fill</span><span class="op">:</span> color<span class="op">,</span></span>
<span id="cb21-365"><a href="#cb21-365" aria-hidden="true" tabindex="-1"></a>        <span class="dt">dorling</span><span class="op">:</span> toggle<span class="op">,</span></span>
<span id="cb21-366"><a href="#cb21-366" aria-hidden="true" tabindex="-1"></a>        <span class="dt">leg_x</span><span class="op">:</span> <span class="dv">30</span><span class="op">,</span></span>
<span id="cb21-367"><a href="#cb21-367" aria-hidden="true" tabindex="-1"></a>        <span class="dt">leg_y</span><span class="op">:</span> <span class="dv">300</span><span class="op">,</span></span>
<span id="cb21-368"><a href="#cb21-368" aria-hidden="true" tabindex="-1"></a>        <span class="dt">leg_round</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb21-369"><a href="#cb21-369" aria-hidden="true" tabindex="-1"></a>        <span class="dt">leg_title</span><span class="op">:</span> <span class="st">"Nombre d'habitants"</span><span class="op">,</span></span>
<span id="cb21-370"><a href="#cb21-370" aria-hidden="true" tabindex="-1"></a>        <span class="co">//tooltip: ["$name", "$POP"]</span></span>
<span id="cb21-371"><a href="#cb21-371" aria-hidden="true" tabindex="-1"></a>        <span class="dt">tooltip</span><span class="op">:</span> [<span class="st">"$name"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">POP</span>) <span class="op">+</span> <span class="st">" millions d'habitants"</span>]        </span>
<span id="cb21-372"><a href="#cb21-372" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb21-373"><a href="#cb21-373" aria-hidden="true" tabindex="-1"></a>      {<span class="dt">geojson</span><span class="op">:</span> africa<span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#DDD"</span>}<span class="op">,</span></span>
<span id="cb21-374"><a href="#cb21-374" aria-hidden="true" tabindex="-1"></a>      {<span class="dt">type</span><span class="op">:</span> <span class="st">"header"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"Le continent africain"</span>}<span class="op">,</span></span>
<span id="cb21-375"><a href="#cb21-375" aria-hidden="true" tabindex="-1"></a>      {<span class="dt">type</span><span class="op">:</span> <span class="st">"scalebar"</span>}</span>
<span id="cb21-376"><a href="#cb21-376" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb21-377"><a href="#cb21-377" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb21-378"><a href="#cb21-378" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span></span>
<span id="cb21-379"><a href="#cb21-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-380"><a href="#cb21-380" aria-hidden="true" tabindex="-1"></a><span class="vs">Aller plus loin...</span></span>
<span id="cb21-381"><a href="#cb21-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-382"><a href="#cb21-382" aria-hidden="true" tabindex="-1"></a><span class="vs">A vous de jouer.....</span></span>
<span id="cb21-383"><a href="#cb21-383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-384"><a href="#cb21-384" aria-hidden="true" tabindex="-1"></a></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>